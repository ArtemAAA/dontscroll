console.log("DontSurf content script loaded");const l=["nav","header","footer","aside","script","style","iframe","noscript",'[role="navigation"]','[role="banner"]','[role="complementary"]','[role="contentinfo"]',".ad",".advertisement",".banner",".sidebar",".menu",".navigation",".footer",".header"];function i(e){return e.replace(/\s+/g," ").replace(/\n+/g," ").trim()}function u(){const e=["article","main",'[role="main"]',".content",".main","#content","#main"];for(const n of e){const t=document.querySelector(n);if(t)return t}return document.body}function f(){try{const e=u();if(!e)return console.error("DontSurf: No main content found"),"";const n=e.cloneNode(!0);l.forEach(o=>{n.querySelectorAll(o).forEach(c=>c.remove())});const t=n.innerText;return i(t)}catch(e){return console.error("DontSurf: Error extracting text:",e),""}}function a(){try{const e=document.title,n=window.location.href,t=f();console.log("DontSurf: Analyzing page:",{title:e,url:n});const o=t.split(/\s+/).filter(c=>c.length>4).slice(0,10),r={title:e,url:n,text:t.slice(0,1e3),keywords:o,timestamp:new Date().toISOString()};return console.log("DontSurf: Page analysis complete:",r),r}catch(e){return console.error("DontSurf: Error analyzing page:",e),null}}function s(e){try{chrome.runtime.sendMessage({type:"PAGE_ANALYZED",data:e},n=>{chrome.runtime.lastError?console.error("DontSurf: Error sending message:",chrome.runtime.lastError):console.log("DontSurf: Message sent successfully:",n)})}catch(n){console.error("DontSurf: Error in sendToBackground:",n)}}if(document.readyState==="complete"){const e=a();e&&s(e)}else window.addEventListener("load",()=>{const e=a();e&&s(e)});
