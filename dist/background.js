chrome.tabs.onUpdated.addListener((e,o,t)=>{o.status==="complete"&&t.url&&console.log("Tab updated:",t.url)});chrome.runtime.onMessage.addListener((e,o,t)=>{if(e.type==="PAGE_ANALYZED"){const s={...e.data,timestamp:Date.now()};chrome.storage.local.get(["pageHistory"],r=>{const a=r.pageHistory||[];a.push(s);const n=a.slice(-50);chrome.storage.local.set({pageHistory:n},()=>{console.log("Page data stored:",s)})})}});
